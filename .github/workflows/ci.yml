name: Continuos Integration
on:
  pull_request:
    branches: ['**']
  push:
    branches: ['**', '!update/**', '!pr/**']

jobs:

  test-action-itself:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: ./
        id: test-gh-action
        with:
          OLD_FILE: 'resources/v1.scala_test'
          NEW_FILE: 'resources/V1-breaking-change.scala_test'
      - name: Check on failures
        if: ${{ steps.test-gh-action.outputs.result }} == 'true'
        run: exit 0